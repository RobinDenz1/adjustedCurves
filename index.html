<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Confounder-Adjusted Survival Curves and Cumulative Incidence Functions • adjustedCurves</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Confounder-Adjusted Survival Curves and Cumulative Incidence Functions">
<meta name="description" content="Estimate and plot confounder-adjusted survival curves using either Direct Adjustment, Direct Adjustment with Pseudo-Values, various forms of Inverse Probability of Treatment Weighting, two forms of Augmented Inverse Probability of Treatment Weighting, Empirical Likelihood Estimation or Targeted Maximum Likelihood Estimation. Also includes a significance test for the difference between two adjusted survival curves and the calculation of adjusted restricted mean survival times. Additionally enables the user to estimate and plot cause-specific confounder-adjusted cumulative incidence functions in the competing risks setting using the same methods (with some exceptions). For details, see Denz et. al (2023) &lt;doi:10.1002/sim.9681&gt;.">
<meta property="og:description" content="Estimate and plot confounder-adjusted survival curves using either Direct Adjustment, Direct Adjustment with Pseudo-Values, various forms of Inverse Probability of Treatment Weighting, two forms of Augmented Inverse Probability of Treatment Weighting, Empirical Likelihood Estimation or Targeted Maximum Likelihood Estimation. Also includes a significance test for the difference between two adjusted survival curves and the calculation of adjusted restricted mean survival times. Additionally enables the user to estimate and plot cause-specific confounder-adjusted cumulative incidence functions in the competing risks setting using the same methods (with some exceptions). For details, see Denz et. al (2023) &lt;doi:10.1002/sim.9681&gt;.">
<meta property="og:image" content="https://robindenz1.github.io/adjustedCurves/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">adjustedCurves</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.11.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/adjustedCurves.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/method_overview.html">Overview of methods in adjustedCurves</a></li>
    <li><a class="dropdown-item" href="articles/plot_customization.html">Customizing Adjusted Survival Curve Plots</a></li>
    <li><a class="dropdown-item" href="articles/comparing_groups.html">Comparing Adjusted Survival Curves or Cumulative Incidence Curves</a></li>
    <li><a class="dropdown-item" href="articles/faq.html">Frequently Asked Questions about the adjustedCurves Package</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/RobinDenz1/adjustedCurves/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9">
<div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="adjustedcurves-">adjustedCurves <a class="anchor" aria-label="anchor" href="#adjustedcurves-"></a>
</h1>
</div>
<p>Author: Robin Denz</p>
<div class="section level2">
<h2 id="description">Description<a class="anchor" aria-label="anchor" href="#description"></a>
</h2>
<p><code>adjustedCurves</code> is an R-Package which can be used to estimate and plot confounder-adjusted survival curves + confidence intervals as well as cause-specific confounder-adjusted cumulative incidence functions + confidence intervals using a variety of methods. It provides a convenient wrapper around existing R-Packages on the topic and adds additional methods and functionality on top of it. Those additional features include the calculation of adjusted restricted mean survival times and testing whether two confounder-adjusted survival curves are different in a given interval.</p>
<p>Detailed descriptions of each method can be found in the literature cited in the documentation.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>A stable version can be installed directly from CRAN using:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"adjustedCurves"</span><span class="op">)</span></span></code></pre></div>
<p>The developmental version can be installed using the <code>devtools</code> R-Package:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu">install_github</span><span class="op">(</span><span class="st">"https://github.com/RobinDenz1/adjustedCurves"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="bug-reports-and-feature-requests">Bug Reports and Feature Requests<a class="anchor" aria-label="anchor" href="#bug-reports-and-feature-requests"></a>
</h2>
<p>If you encounter any bugs or have any specific feature requests, please file an <a href="https://github.com/RobinDenz1/adjustedCurves/issues" class="external-link">Issue</a>.</p>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<p>This minimal example shows how to estimate and plot adjusted survival curves using <em>Direct Adjustment</em> with this package:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RobinDenz1/adjustedCurves" class="external-link">adjustedCurves</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/therneau/survival" class="external-link">survival</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># simulate some data as example</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">31</span><span class="op">)</span></span>
<span><span class="va">sim_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sim_confounded_surv.html">sim_confounded_surv</a></span><span class="op">(</span>n<span class="op">=</span><span class="fl">250</span>, max_t<span class="op">=</span><span class="fl">1.2</span>, group_beta<span class="op">=</span><span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">sim_dat</span><span class="op">$</span><span class="va">group</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">sim_dat</span><span class="op">$</span><span class="va">group</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># estimate a cox-regression for the outcome</span></span>
<span><span class="va">cox_mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/coxph.html" class="external-link">coxph</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">event</span><span class="op">)</span> <span class="op">~</span> <span class="va">x1</span> <span class="op">+</span> <span class="va">x2</span> <span class="op">+</span> <span class="va">x4</span> <span class="op">+</span> <span class="va">x5</span> <span class="op">+</span> <span class="va">group</span>,</span>
<span>                 data<span class="op">=</span><span class="va">sim_dat</span>, x<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># use it to estimate adjusted survival curves</span></span>
<span><span class="va">adjsurv</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/adjustedsurv.html">adjustedsurv</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">sim_dat</span>,</span>
<span>                        variable<span class="op">=</span><span class="st">"group"</span>,</span>
<span>                        ev_time<span class="op">=</span><span class="st">"time"</span>,</span>
<span>                        event<span class="op">=</span><span class="st">"event"</span>,</span>
<span>                        method<span class="op">=</span><span class="st">"direct"</span>,</span>
<span>                        outcome_model<span class="op">=</span><span class="va">cox_mod</span>,</span>
<span>                        conf_int<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot with confidence intervals</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">adjsurv</span>, conf_int<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-4-1.png" width="100%"></p>
<p>Here is an example of how to estimate and plot adjusted survival curves using <em>Inverse Probability of Treatment Weighting</em>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># estimate a treatment assignment model</span></span>
<span><span class="va">glm_mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">group</span> <span class="op">~</span> <span class="va">x2</span> <span class="op">+</span> <span class="va">x3</span> <span class="op">+</span> <span class="va">x5</span> <span class="op">+</span> <span class="va">x6</span>, data<span class="op">=</span><span class="va">sim_dat</span>,</span>
<span>               family<span class="op">=</span><span class="st">"binomial"</span><span class="op">(</span>link<span class="op">=</span><span class="st">"logit"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># use it to estimate adjusted survival curves</span></span>
<span><span class="va">adjsurv</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/adjustedsurv.html">adjustedsurv</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">sim_dat</span>,</span>
<span>                        variable<span class="op">=</span><span class="st">"group"</span>,</span>
<span>                        ev_time<span class="op">=</span><span class="st">"time"</span>,</span>
<span>                        event<span class="op">=</span><span class="st">"event"</span>,</span>
<span>                        method<span class="op">=</span><span class="st">"iptw_km"</span>,</span>
<span>                        treatment_model<span class="op">=</span><span class="va">glm_mod</span>,</span>
<span>                        conf_int<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot with confidence intervals</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">adjsurv</span>, conf_int<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-5-1.png" width="100%"></p>
<p>It is also possible to plot the difference between two curves using the <code><a href="reference/plot_curve_diff.html">plot_curve_diff()</a></code> function:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/plot_curve_diff.html">plot_curve_diff</a></span><span class="op">(</span><span class="va">adjsurv</span>, conf_int<span class="op">=</span><span class="cn">TRUE</span>, color<span class="op">=</span><span class="st">"blue"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-6-1.png" width="100%"></p>
<p>To test whether the two adjusted survival curves are different in a specified interval (here 0 to 0.75), the <code>adjustedsurv</code> call has to be made with <code>bootstrap=TRUE</code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">adjsurv</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/adjustedsurv.html">adjustedsurv</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">sim_dat</span>,</span>
<span>                        variable<span class="op">=</span><span class="st">"group"</span>,</span>
<span>                        ev_time<span class="op">=</span><span class="st">"time"</span>,</span>
<span>                        event<span class="op">=</span><span class="st">"event"</span>,</span>
<span>                        method<span class="op">=</span><span class="st">"direct"</span>,</span>
<span>                        outcome_model<span class="op">=</span><span class="va">cox_mod</span>,</span>
<span>                        conf_int<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span>                        bootstrap<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span>                        n_boot<span class="op">=</span><span class="fl">1000</span><span class="op">)</span></span>
<span></span>
<span><span class="va">adj_test</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/adjusted_curve_test.html">adjusted_curve_test</a></span><span class="op">(</span><span class="va">adjsurv</span>, from<span class="op">=</span><span class="fl">0</span>, to<span class="op">=</span><span class="fl">0.75</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">adj_test</span><span class="op">)</span></span>
<span><span class="co">#&gt; ------------------------------------------------------------------</span></span>
<span><span class="co">#&gt;    Test of the Difference between two adjusted Survival Curves</span></span>
<span><span class="co">#&gt; ------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Using the interval: 0 to 0.75 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;             ABC ABC SE 95% CI (lower) 95% CI (upper) P-Value N Boot</span></span>
<span><span class="co">#&gt; 0 vs. 1 -0.0129 0.0268         -0.066         0.0401   0.616   1000</span></span>
<span><span class="co">#&gt; ------------------------------------------------------------------</span></span></code></pre></div>
<p>More examples can be found in the documentation and the vignettes.</p>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>The main paper associated with this R-Package is:</p>
<p>Robin Denz, Renate Klaaßen-Mielke, and Nina Timmesfeld (2023). <em>A comparison of different methods to adjust survival curves for confounders</em>. Statistics in Medicine. 42.10, pp. 1461-1479. <a href="doi:10.1002/sim.9681" class="uri">doi:10.1002/sim.9681</a></p>
<p>In addition, the relevant primary literature of the respective method should be cited. This can be found in the documentation of the method.</p>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>© 2024 Robin Denz</p>
<p>The contents of this repository are distributed under the GNU General Public License. You can find the full text of this License in this github repository. Alternatively, see <a href="http://www.gnu.org/licenses/" class="external-link uri">http://www.gnu.org/licenses/</a>.</p>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=adjustedCurves" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/RobinDenz1/adjustedCurves/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/RobinDenz1/adjustedCurves/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing adjustedCurves</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Robin Denz <br><small class="roles"> Author, maintainer </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active - The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://cran.r-project.org/package=adjustedCurves" class="external-link"><img src="https://www.r-pkg.org/badges/version/adjustedCurves?color=green"></a></li>
<li><a href="https://cran.r-project.org/package=adjustedCurves" class="external-link"><img src="http://cranlogs.r-pkg.org/badges/grand-total/adjustedCurves?color=blue"></a></li>
<li><a href="https://github.com/RobinDenz1/adjustedCurves/actions" class="external-link"><img src="https://github.com/RobinDenz1/adjustedCurves/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/RobinDenz1/adjustedCurves?branch=main" class="external-link"><img src="https://codecov.io/gh/RobinDenz1/adjustedCurves/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robin Denz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
