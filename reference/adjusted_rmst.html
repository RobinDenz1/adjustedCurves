<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function can be utilized to calculate the confounder-adjusted restricted mean survival time, given previously estimated adjusted survival curves."><title>Calculate Confounder-Adjusted Restricted Mean Survival Times — adjusted_rmst • adjustedCurves</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate Confounder-Adjusted Restricted Mean Survival Times — adjusted_rmst"><meta property="og:description" content="This function can be utilized to calculate the confounder-adjusted restricted mean survival time, given previously estimated adjusted survival curves."><meta property="og:image" content="https://robindenz1.github.io/adjustedCurves/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">adjustedCurves</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/introduction.html">An Introduction to the 'adjustedCurves' Package</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/RobinDenz1/adjustedCurves/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Calculate Confounder-Adjusted Restricted Mean Survival Times</h1>
      
      <div class="d-none name"><code>adjusted_rmst.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function can be utilized to calculate the confounder-adjusted restricted mean survival time, given previously estimated adjusted survival curves.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">adjusted_rmst</span><span class="op">(</span><span class="va">adjsurv</span>, <span class="va">to</span>, from<span class="op">=</span><span class="fl">0</span>, use_boot<span class="op">=</span><span class="cn">FALSE</span>,
              conf_level<span class="op">=</span><span class="fl">0.95</span><span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>adjsurv</dt>
<dd><p>An <code>adjustedsurv</code> object created using the <code>adjustedsurv</code> function.</p></dd>
<dt>from</dt>
<dd><p>A number specifying the left side of the time interval of interest. See details. Usually this should be kept at 0 (default) unless there are good reasons to change it.</p></dd>
<dt>to</dt>
<dd><p>A number specifying the right side of the time interval of interest. See details.</p></dd>
<dt>use_boot</dt>
<dd><p>Whether bootstrap estimates should be used to calculate the standard deviation and confidence intervals of the RMST estimates. Can only be used if <code>bootstrap=TRUE</code> was used in the <code><a href="adjustedsurv.html">adjustedsurv</a></code> call.</p></dd>
<dt>conf_level</dt>
<dd><p>A number specifying the confidence level of the bootstrap confidence intervals.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    

<p>The adjusted restricted mean survival times (RMST) are calculated by integrating the estimated adjusted survival curves in a specified interval. Let \(Z\) be the grouping variable (corresponding to the <code>variable</code> argument in the <code><a href="adjustedsurv.html">adjustedsurv</a></code> function) with possible levels \(Z \in \{0, 1, 2, ..., k\}\). \(T\) is defined as the time and \(\hat{S}_z(t)\) denotes the estimated counterfactual survival function. The RMST is then defined as:</p>
<p>$$RMST_{z} = \int_{from}^{to} \hat{S}_z(t)$$</p>
<p>It can be interpreted as the mean survival time of individuals in group \(Z = z\) in the interval [<code>from</code>, <code>to</code>]. Note however that simply subtracting the estimates from each other does not give a correct estimate of the area between the survival curves if the respective curves cross at some point. The <code><a href="adjusted_curve_diff.html">adjusted_curve_diff</a></code> function can be used to calculate the actual area between the curves instead. See <code><a href="adjusted_curve_diff.html">?adjusted_curve_diff</a></code> for more information.</p>
<p>The associated <code>print</code> and <code>summary</code> methods can be used to obtain a neat data.frame of the most important quantities. There is also a small <code>plot</code> method to graphically display the results.</p>
<p><strong><em>Confidence Intervals</em></strong></p>
<p>If the <code>adjsurv</code> object was created with <code>bootstrap = TRUE</code> in the <code><a href="adjustedsurv.html">adjustedsurv</a></code> function, bootstrap confidence intervals and standard errors for the RMSTs can be approximated by setting <code>use_boot</code> to <code>TRUE</code>. If bootstrap samples occur where the survival function is not estimated up to <code>to</code>, the bootstrap sample is discarded and not used in further calculations. Approximate variance calculations not relying on the bootstrap estimates are currently not implemented.</p>
<p><strong><em>Multiple Imputation</em></strong></p>
<p>If multiple imputation was used when creating the <code>adjsurv</code> object, the analysis is carries out on all multiply imputed datasets and pooled using Rubins Rule. When bootstrapping was carried out as well, the pooled standard error over all imputed datasets is used in combination with the normal approximation to re-calculate the bootstrap confidence intervals.</p>
<p><strong><em>Competing Risks</em></strong></p>
<p>This function cannot be used with <code>adjustedcif</code> objects, because the survival probability cannot be estimated in an unbiased way when competing risks are present. However, a very similar quantity, the <em>adjusted restricted mean time lost</em>, can be calculated using the <code><a href="adjusted_rmtl.html">adjusted_rmtl</a></code> function.</p>
<p><strong><em>Computational Details</em></strong></p>
<p>Since the estimated survival functions are step functions the integrals are calculated exactly instead of relying on trapezoid approximations.</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a <code>adjusted_rmst</code> object containing the following object:</p>
<dl><dt>auc</dt>
<dd><p>A named vector containing the adjusted restricted mean survival time estimates.</p></dd>
<dt>from</dt>
<dd><p><code>from</code> argument in function call.</p></dd>
<dt>to</dt>
<dd><p><code>to</code> argument in function call.</p></dd>
</dl><p>If <code>use_boot</code> is set to <code>TRUE</code> and <code>bootstrap</code> was also set to <code>TRUE</code> in the original <code>adjustedsurv</code> function call, the following objects are also added to the output:</p>
<dl><dt>conf_level</dt>
<dd><p>The confidence level used when calculating the confidence intervals.</p></dd>
<dt>n_boot</dt>
<dd><p>The numbers of bootstrap iterations actually used to calculate the bootstrap estimates.</p></dd>
<dt>booted_auc</dt>
<dd><p>A <code>data.frame</code> containing the adjusted restricted mean survival time estimates for each bootstrap sample.</p></dd>
<dt>auc_se</dt>
<dd><p>A named vector containing the bootstrapped standard errors of the restricted mean survival times.</p></dd>
<dt>auc_ci_lower</dt>
<dd><p>Lower value of the bootstrap confidence intervals.</p></dd>
<dt>auc_ci_upper</dt>
<dd><p>Upper value of the bootstrap confidence intervals.</p></dd>
</dl><p>If multiple imputation was used the output also contains an <code>mids_analyses</code> object, containing one <code>adjusted_rmst</code> object for each imputed dataset.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Sarah C. Conner, Lisa M. Sullivan, Emelia J. Benjamin, Michael P. LaValley, Sandro Galea, and Ludovic Trinquart (2019). "Adjusted Restricted Mean Survival Times in Observational Studies". In: Statistics in Medicine 38, pp. 3832-3860</p>
<p>Patrick Royston and Mahesh K. B. Parmar (2013). "Restricted Mean Survival Time: An Alternative to the Hazard Ratio for the Design and Analysis of Randomized Trials with a Time-To-Event Outcome". In: BMC Medical Research Methodology 13.152</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Robin Denz</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="print.adjusted_rmst.html">print.adjusted_rmst</a></code>, <code><a href="adjustedsurv.html">adjustedsurv</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/therneau/survival" class="external-link">survival</a></span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># simulate some data as example</span></span>
<span class="r-in"><span class="va">sim_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="sim_confounded_surv.html">sim_confounded_surv</a></span><span class="op">(</span>n<span class="op">=</span><span class="fl">500</span>, max_t<span class="op">=</span><span class="fl">1.2</span><span class="op">)</span></span>
<span class="r-in"><span class="va">sim_dat</span><span class="op">$</span><span class="va">group</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">sim_dat</span><span class="op">$</span><span class="va">group</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># estimate a cox-regression for the outcome</span></span>
<span class="r-in"><span class="va">cox_mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/coxph.html" class="external-link">coxph</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">event</span><span class="op">)</span> <span class="op">~</span> <span class="va">x1</span> <span class="op">+</span> <span class="va">x2</span> <span class="op">+</span> <span class="va">x3</span> <span class="op">+</span> <span class="va">x4</span> <span class="op">+</span> <span class="va">x5</span> <span class="op">+</span> <span class="va">x6</span> <span class="op">+</span> <span class="va">group</span>,</span>
<span class="r-in">                 data<span class="op">=</span><span class="va">sim_dat</span>, x<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># use it to calculate adjusted survival curves with bootstrapping</span></span>
<span class="r-in"><span class="va">adjsurv</span> <span class="op">&lt;-</span> <span class="fu"><a href="adjustedsurv.html">adjustedsurv</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">sim_dat</span>,</span>
<span class="r-in">                        variable<span class="op">=</span><span class="st">"group"</span>,</span>
<span class="r-in">                        ev_time<span class="op">=</span><span class="st">"time"</span>,</span>
<span class="r-in">                        event<span class="op">=</span><span class="st">"event"</span>,</span>
<span class="r-in">                        method<span class="op">=</span><span class="st">"direct"</span>,</span>
<span class="r-in">                        outcome_model<span class="op">=</span><span class="va">cox_mod</span>,</span>
<span class="r-in">                        conf_int<span class="op">=</span><span class="cn">FALSE</span>,</span>
<span class="r-in">                        bootstrap<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span class="r-in">                        n_boot<span class="op">=</span><span class="fl">500</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># calculate adjusted restricted mean survival times from 0 to 1</span></span>
<span class="r-in"><span class="va">adjrmst</span> <span class="op">&lt;-</span> <span class="fu">adjusted_rmst</span><span class="op">(</span><span class="va">adjsurv</span>, from<span class="op">=</span><span class="fl">0</span>, to<span class="op">=</span><span class="fl">1</span>, use_boot<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">adjrmst</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># calculate adjusted restricted mean survival times from 0 to 1,</span></span>
<span class="r-in"><span class="co"># including standard errors and confidence intervals</span></span>
<span class="r-in"><span class="va">adjrmst</span> <span class="op">&lt;-</span> <span class="fu">adjusted_rmst</span><span class="op">(</span><span class="va">adjsurv</span>, from<span class="op">=</span><span class="fl">0</span>, to<span class="op">=</span><span class="fl">1</span>, use_boot<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span class="r-in">                         conf_level<span class="op">=</span><span class="fl">0.95</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">adjrmst</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Robin Denz.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer></div>

  

  

  </body></html>

